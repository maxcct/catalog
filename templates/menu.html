{% extends "base.html" %}
{% block content %}
	{% filter upper %}
		<h1>{{restaurant.name}}</h1>
	{% endfilter %}
	{% with messages = get_flashed_messages() %}
		{% if messages %}
			{% for message in messages %}
				<p id='menu-flash'>{{message}}</p>
			{% endfor %}
		{% endif %}
	{% endwith %}
	<br>
	<div id='menu-content'>
		{% if show_restricted %}
			<hr>
			<a id='create-new' href="{{url_for('new_menu_item', restaurant_id=restaurant.id)}}"><p>C R E A T E</p><p>N E W</p><p>M E N U</p><p>I T E M</p></a>
		{% endif %}
		<hr id='course-hr'>
		{% if items|length > 0 %}
			{% if starters|length > 0 %}
				<h2 class='course'>STARTERS</h2>
				<hr id='course-hr'>
				{% for i in starters %}
					<div class='menu-expand-text'>
						<p id='item-name'>{{i.name}}</p>
						<p id='item-description'>{{i.description}}</p>
						<p>{{i.price}}</p>
						{% if show_restricted %}
							<div id='inline-buttons'>
								<a class='edit-delete' href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">EDIT</a>
								<a class='edit-delete' href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">DELETE</a>
							</div>
						{% endif %}
						<br>
						<hr id='course-hr'>
					</div>
				{% endfor %}
			{% endif %}
			{% if mains|length > 0 %}
				<h2 class='course'>MAIN COURSES</h2>
				<hr id='course-hr'>
				{% for i in mains %}
					<div class='menu-expand-text'>
						<p id='item-name'>{{i.name}}</p>
						<p id='item-description'>{{i.description}}</p>
						<p>{{i.price}}</p>
						{% if show_restricted %}
							<div id='inline-buttons'>
								<a class='edit-delete' href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">EDIT</a>
								<a class='edit-delete' href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">DELETE</a>
							</div>
						{% endif %}
						<br>
						<hr id='course-hr'>
					</div>	
				{% endfor %}
			{% endif %}
			{% if desserts|length > 0 %}
				<h2 class='course'>DESSERTS</h2>
				<hr id='course-hr'>
				{% for i in desserts %}
					<div class='menu-expand-text'>
						<p id='item-name'>{{i.name}}</p>
						<p id='item-description'>{{i.description}}</p>
						<p>{{i.price}}</p>
						{% if show_restricted %}
							<div id='inline-buttons'>
								<a class='edit-delete' href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">EDIT</a>
								<a class='edit-delete' href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">DELETE</a>
							</div>
						{% endif %}
						<br>
						<hr id='course-hr'>
					</div>
				{% endfor %}
			{% endif %}
			{% if drinks|length > 0 %}
				<h2 class='course'>DRINKS</h2>
				<hr id='course-hr'>
				{% for i in drinks %}
					<div class='menu-expand-text'>
						<p id='item-name'>{{i.name}}</p>
						<p id='item-description'>{{i.description}}</p>
						<p>{{i.price}}</p>
						{% if show_restricted %}
							<div id='inline-buttons'>
								<a class='edit-delete' href="{{url_for('edit_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">EDIT</a>
								<a class='edit-delete' href="{{url_for('delete_menu_item', restaurant_id=restaurant.id, menu_id=i.id)}}">DELETE</a>
							</div>
						{% endif %}
						<br>
						<hr id='course-hr'>
					</div>
				{% endfor %}
				<br>
			{% endif %}
		{% else %}
			<h2 class='unavailable'>No menu is available for this restaurant!</h2>
		{% endif %}
	</div>
	<script type="text/javascript">
		var owner = "<div id='proprietor'><h2>The proprietor of this establishment is "
		owner += owner_name
		owner += "</h2><img src="
		owner += owner_picture
		owner += "></div><br><br><br>"
		var owner_name = "{{owner.name}}"
		var owner_picture = "{{owner.picture}}"
	</script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
	<script src="/static/catalogTweaker.js" type="text/javascript"></script>
{% endblock %}